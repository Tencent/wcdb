<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">

	<title>WCTDatabase Class Reference</title>

	<link rel="stylesheet" href="../css/style.css">
	<meta name="viewport" content="initial-scale=1, maximum-scale=1.4">
	<meta name="generator" content="appledoc 2.2.1 (build 1334)">
</head>
<body class="appledoc">
	<header>
		<div class="container" class="hide-in-xcode">
			
			<h1 id="library-title">
				<a href="../index.html">WCDB </a>
			</h1>

			<p id="developer-home">
				<a href="../index.html">Tencent</a>
			</p>
			
		</div>
	</header>

	<aside>
		<div class="container">
			<nav>
				<ul id="header-buttons" role="toolbar">
					<li><a href="../index.html">Index</a></li>
<li><a href="../hierarchy.html">Hierarchy</a></li>

					<li id="on-this-page" role="navigation">
						<label>
							On This Page

							<div class="chevron">
								<div class="chevy chevron-left"></div>
								<div class="chevy chevron-right"></div>
							</div>

							<select id="jump-to">
	<option value="top">Jump To&#133;</option>
	
	<option value="overview">Overview</option>
	

	
	
	<option value="tasks">Tasks</option>
	
	

	
	

	
	<optgroup label="Class Methods">
		
		<option value="//api/name/PurgeFreeHandlesInAllDatabases">+ PurgeFreeHandlesInAllDatabases</option>
		
	</optgroup>
	

	
	<optgroup label="Instance Methods">
		
		<option value="//api/name/addColumn:forTable:">- addColumn:forTable:</option>
		
		<option value="//api/name/backupWithCipher:">- backupWithCipher:</option>
		
		<option value="//api/name/beginTransaction">- beginTransaction</option>
		
		<option value="//api/name/blockade">- blockade</option>
		
		<option value="//api/name/canOpen">- canOpen</option>
		
		<option value="//api/name/close">- close</option>
		
		<option value="//api/name/close:">- close:</option>
		
		<option value="//api/name/commitTransaction">- commitTransaction</option>
		
		<option value="//api/name/createIndexOfName:withIndexList:forTable:">- createIndexOfName:withIndexList:forTable:</option>
		
		<option value="//api/name/createTableAndIndexesOfName:withClass:">- createTableAndIndexesOfName:withClass:</option>
		
		<option value="//api/name/createTableOfName:withColumnDefList:">- createTableOfName:withColumnDefList:</option>
		
		<option value="//api/name/createTableOfName:withColumnDefList:andConstraintList:">- createTableOfName:withColumnDefList:andConstraintList:</option>
		
		<option value="//api/name/createVirtualTableOfName:usingModule:withClass:">- createVirtualTableOfName:usingModule:withClass:</option>
		
		<option value="//api/name/dropIndexOfName:">- dropIndexOfName:</option>
		
		<option value="//api/name/dropTableOfName:">- dropTableOfName:</option>
		
		<option value="//api/name/getFilesSizeWithError:">- getFilesSizeWithError:</option>
		
		<option value="//api/name/getPaths">- getPaths</option>
		
		<option value="//api/name/getTableOfName:withClass:">- getTableOfName:withClass:</option>
		
		<option value="//api/name/getTransaction">- getTransaction</option>
		
		<option value="//api/name/initWithPath:">- initWithPath:</option>
		
		<option value="//api/name/isBlockaded">- isBlockaded</option>
		
		<option value="//api/name/isOpened">- isOpened</option>
		
		<option value="//api/name/isTableExists:">- isTableExists:</option>
		
		<option value="//api/name/moveFilesToDirectory:withError:">- moveFilesToDirectory:withError:</option>
		
		<option value="//api/name/moveFilesToDirectory:withExtraFiles:andError:">- moveFilesToDirectory:withExtraFiles:andError:</option>
		
		<option value="//api/name/purgeFreeHandles">- purgeFreeHandles</option>
		
		<option value="//api/name/recoverFromPath:withPageSize:backupCipher:databaseCipher:">- recoverFromPath:withPageSize:backupCipher:databaseCipher:</option>
		
		<option value="//api/name/removeFilesWithError:">- removeFilesWithError:</option>
		
		<option value="//api/name/rollbackTransaction">- rollbackTransaction</option>
		
		<option value="//api/name/runTransaction:">- runTransaction:</option>
		
		<option value="//api/name/runTransaction:event:">- runTransaction:event:</option>
		
		<option value="//api/name/setCipherKey:">- setCipherKey:</option>
		
		<option value="//api/name/setConfig:forName:">- setConfig:forName:</option>
		
		<option value="//api/name/setConfig:forName:withOrder:">- setConfig:forName:withOrder:</option>
		
		<option value="//api/name/setTag:">- setTag:</option>
		
		<option value="//api/name/setTrace:">- setTrace:</option>
		
		<option value="//api/name/unblockade">- unblockade</option>
		
	</optgroup>
	
	
</select>
						</label>
					</li>
				</ul>
			</nav>
		</div>
	</aside>

	<article>
		<div id="overview_contents" class="container">
			<div id="content">
				<main role="main">
					<h1 class="title">WCTDatabase Class Reference</h1>

					
					<div class="section section-specification"><table cellspacing="0"><tbody>
						<tr>
	<th>Inherits from</th>
	<td><a href="../Classes/WCTInterface.html">WCTInterface</a> : <a href="../Classes/WCTCore.html">WCTCore</a> : NSObject</td>
</tr><tr>
	<th>Declared in</th>
	<td>WCTDatabase.h</td>
</tr>
						</tbody></table></div>
					

                    
					
					<div class="section section-overview">
						<a title="Overview" name="overview"></a>
						<h2 class="subtitle subtitle-overview">Overview</h2>
						<p>Thread-safe</p>
					</div>
					
					

					
					
					<div class="section section-tasks">
						<a title="Tasks" name="tasks"></a>
						

						<a title="RepairKit Methods" name="task_RepairKit Methods"></a>
						<h2 class="task-title">RepairKit Methods</h2>

						<div class="task-list">
							<div class="section-method">
	<a name="//api/name/backupWithCipher:" title="backupWithCipher:"></a>
	<h3 class="method-title"><code><a href="#//api/name/backupWithCipher:">&ndash;&nbsp;backupWithCipher:</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>Backup metadata to recover. Since metadata will be changed while a table or an index is created or dropped, you should call this periodically.</p>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>- (BOOL)backupWithCipher:(NSData *)<em>key</em></code></div>

		    
			
			<div class="method-subsection arguments-section parameters">
				<h4 class="method-subtitle parameter-title">Parameters</h4>
				<table class="argument-def parameter-def">
				
					<tr>
						<th scope="row" class="argument-name"><code>key</code></th>
						<td><p>The cipher key for backup</p></td>
					</tr>
				
				</table>
			</div>
			

			
			<div class="method-subsection return">
				<h4 class="method-subtitle parameter-title">Return Value</h4>
				<p>YES only if it&rsquo;s successfully backed up</p>
			</div>
			

			

			

			

			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">WCTDatabase+RepairKit.h</code></p>
			</div>
			
			
		</div>
	</div>
</div><div class="section-method">
	<a name="//api/name/recoverFromPath:withPageSize:backupCipher:databaseCipher:" title="recoverFromPath:withPageSize:backupCipher:databaseCipher:"></a>
	<h3 class="method-title"><code><a href="#//api/name/recoverFromPath:withPageSize:backupCipher:databaseCipher:">&ndash;&nbsp;recoverFromPath:withPageSize:backupCipher:databaseCipher:</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>Recover data from a corruped db. You&rsquo;d better to recover a closed database. A new repair kit is developing at <a href="https://github.com/Tencent/wcdb/tree/new-repair">https://github.com/Tencent/wcdb/tree/new-repair</a></p>

<pre><code> WCTDatabase* database = [[WCTDatabase alloc] initWithPath:path];
 WCTDatabase* corruped = [[WCTDatabase alloc] initWithPath:corrupedDBPath];
 [corruped close:^(){
     BOOL result = [database recoverFromPath:corrupedDBPath withPageSize:4096 backupCipher:backupCipher databaseCipher:databaseCipher];
     NSLog(@"result %d", result);
 }];
</code></pre>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>- (BOOL)recoverFromPath:(NSString *)<em>corruptedDBPath</em> withPageSize:(const int)<em>pageSize</em> backupCipher:(NSData *)<em>backupCipher</em> databaseCipher:(NSData *)<em>databaseCipher</em></code></div>

		    
			
			<div class="method-subsection arguments-section parameters">
				<h4 class="method-subtitle parameter-title">Parameters</h4>
				<table class="argument-def parameter-def">
				
					<tr>
						<th scope="row" class="argument-name"><code>corruptedDBPath</code></th>
						<td><p>The path to the corrupted database</p></td>
					</tr>
				
					<tr>
						<th scope="row" class="argument-name"><code>pageSize</code></th>
						<td><p>Page size of the corrupted database. It&rsquo;s default to 4096 on iOS. Page size never change unless you can call &ldquo;PRAGMA page_size=NewPageSize&rdquo; to set it. Also, you can call &ldquo;PRAGMA page_size&rdquo; to check the current value while database is not corrupted.</p></td>
					</tr>
				
					<tr>
						<th scope="row" class="argument-name"><code>backupCipher</code></th>
						<td><p>The cipher key for backup</p></td>
					</tr>
				
					<tr>
						<th scope="row" class="argument-name"><code>databaseCipher</code></th>
						<td><p>The cipher key for corrupeted database</p></td>
					</tr>
				
				</table>
			</div>
			

			
			<div class="method-subsection return">
				<h4 class="method-subtitle parameter-title">Return Value</h4>
				<p>YES only if it&rsquo;s successfully recovered.</p>
			</div>
			

			

			

			

			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">WCTDatabase+RepairKit.h</code></p>
			</div>
			
			
		</div>
	</div>
</div>
						</div>
						

						<a title="Core Methods" name="task_Core Methods"></a>
						<h2 class="task-title">Core Methods</h2>

						<div class="task-list">
							<div class="section-method">
	<a name="//api/name/setConfig:forName:withOrder:" title="setConfig:forName:withOrder:"></a>
	<h3 class="method-title"><code><a href="#//api/name/setConfig:forName:withOrder:">&ndash;&nbsp;setConfig:forName:withOrder:</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>Set config for this database.</p>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>- (void)setConfig:(WCDB : : Config)<em>config</em> forName:(NSString *)<em>name</em> withOrder:(WCDB : : Configs : : Order)<em>order</em></code></div>

		    
			
			<div class="method-subsection arguments-section parameters">
				<h4 class="method-subtitle parameter-title">Parameters</h4>
				<table class="argument-def parameter-def">
				
					<tr>
						<th scope="row" class="argument-name"><code>config</code></th>
						<td><p>config</p></td>
					</tr>
				
					<tr>
						<th scope="row" class="argument-name"><code>name</code></th>
						<td><p>The Identifier for this config</p></td>
					</tr>
				
					<tr>
						<th scope="row" class="argument-name"><code>order</code></th>
						<td><p>The smaller number is called first</p></td>
					</tr>
				
				</table>
			</div>
			

			

			

			
			<div class="method-subsection discussion-section">
				<h4 class="method-subtitle">Discussion</h4>
				<div class="warning"><p><strong>Warning:</strong> Since WCDB is a multi-handle database, an executing handle will not apply this config immediately. Instead, all handles will run this config before its next operation.</p>

<pre><code> [database setConfig:^BOOL(std::shared_ptr&lt;WCDB::Handle&gt; handle, WCDB::Error&amp; error) {
    return handle-&gt;exec(WCDB::StatementPragma().pragma(WCDB::Pragma::SecureDelete, YES));
 } forName:@"demo" withOrder:1];
</code></pre></div>
			</div>
			

			

			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">WCTDatabase+Core.h</code></p>
			</div>
			
			
		</div>
	</div>
</div><div class="section-method">
	<a name="//api/name/setConfig:forName:" title="setConfig:forName:"></a>
	<h3 class="method-title"><code><a href="#//api/name/setConfig:forName:">&ndash;&nbsp;setConfig:forName:</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>This interface is equivalent to [database setConfig:config forName:name withOrder:INT_MAX];</p>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>- (void)setConfig:(WCDB : : Config)<em>config</em> forName:(NSString *)<em>name</em></code></div>

		    
			
			<div class="method-subsection arguments-section parameters">
				<h4 class="method-subtitle parameter-title">Parameters</h4>
				<table class="argument-def parameter-def">
				
					<tr>
						<th scope="row" class="argument-name"><code>config</code></th>
						<td><p>config</p></td>
					</tr>
				
					<tr>
						<th scope="row" class="argument-name"><code>name</code></th>
						<td><p>The Identifier for this config</p></td>
					</tr>
				
				</table>
			</div>
			

			

			

			

			

			
			<div class="method-subsection see-also-section">
				<h4 class="method-subtitle">See Also</h4>
				<ul>
					
					<li><code><p><a href="#//api/name/setConfig:forName:withOrder:">- setConfig:forName:withOrder:</a></p></code></li>
					
				</ul>
			</div>
			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">WCTDatabase+Core.h</code></p>
			</div>
			
			
		</div>
	</div>
</div>
						</div>
						

						<a title="Database Methods" name="task_Database Methods"></a>
						<h2 class="task-title">Database Methods</h2>

						<div class="task-list">
							<div class="section-method">
	<a name="//api/name/initWithPath:" title="initWithPath:"></a>
	<h3 class="method-title"><code><a href="#//api/name/initWithPath:">&ndash;&nbsp;initWithPath:</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>Init a database from path.
        Note that all database objects with same path share the same core. So you can create multiple database objects. WCDB will manage them automatically.
        Note that WCDB will not generate a sqlite handle until the first operation, which is also called as lazy initialization.</p>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>- (instancetype)initWithPath:(NSString *)<em>path</em></code></div>

		    
			
			<div class="method-subsection arguments-section parameters">
				<h4 class="method-subtitle parameter-title">Parameters</h4>
				<table class="argument-def parameter-def">
				
					<tr>
						<th scope="row" class="argument-name"><code>path</code></th>
						<td><p>Path to your database</p></td>
					</tr>
				
				</table>
			</div>
			

			
			<div class="method-subsection return">
				<h4 class="method-subtitle parameter-title">Return Value</h4>
				<p>WCTDatabase</p>
			</div>
			

			

			

			

			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">WCTDatabase+Database.h</code></p>
			</div>
			
			
		</div>
	</div>
</div><div class="section-method">
	<a name="//api/name/setCipherKey:" title="setCipherKey:"></a>
	<h3 class="method-title"><code><a href="#//api/name/setCipherKey:">&ndash;&nbsp;setCipherKey:</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>Set cipher key for a database.
        For an encrypted database, you must call it before all other operation.</p>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>- (void)setCipherKey:(NSData *)<em>data</em></code></div>

		    
			
			<div class="method-subsection arguments-section parameters">
				<h4 class="method-subtitle parameter-title">Parameters</h4>
				<table class="argument-def parameter-def">
				
					<tr>
						<th scope="row" class="argument-name"><code>data</code></th>
						<td><p>Cipher key.</p></td>
					</tr>
				
				</table>
			</div>
			

			

			

			

			

			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">WCTDatabase+Database.h</code></p>
			</div>
			
			
		</div>
	</div>
</div><div class="section-method">
	<a name="//api/name/setTag:" title="setTag:"></a>
	<h3 class="method-title"><code><a href="#//api/name/setTag:">&ndash;&nbsp;setTag:</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>Set the tag of the database.
        Note that <a href="../Classes/WCTCore.html">WCTCore</a> objects with same path share this tag, even they are not the same object.</p>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>- (void)setTag:(WCTTag)<em>tag</em></code></div>

		    
			
			<div class="method-subsection arguments-section parameters">
				<h4 class="method-subtitle parameter-title">Parameters</h4>
				<table class="argument-def parameter-def">
				
					<tr>
						<th scope="row" class="argument-name"><code>tag</code></th>
						<td><p>Default to 0.</p></td>
					</tr>
				
				</table>
			</div>
			

			

			

			

			

			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">WCTDatabase+Database.h</code></p>
			</div>
			
			
		</div>
	</div>
</div><div class="section-method">
	<a name="//api/name/canOpen" title="canOpen"></a>
	<h3 class="method-title"><code><a href="#//api/name/canOpen">&ndash;&nbsp;canOpen</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>Since WCDB is using lazy initialization, [initWithPath:] never return nil even the database can&rsquo;t open. So you can call this to check whether the database can be opened.</p>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>- (BOOL)canOpen</code></div>

		    
			

			
			<div class="method-subsection return">
				<h4 class="method-subtitle parameter-title">Return Value</h4>
				<p>NO if an error occurs during sqlite handle initialization.</p>
			</div>
			

			

			

			

			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">WCTDatabase+Database.h</code></p>
			</div>
			
			
		</div>
	</div>
</div><div class="section-method">
	<a name="//api/name/isOpened" title="isOpened"></a>
	<h3 class="method-title"><code><a href="#//api/name/isOpened">&ndash;&nbsp;isOpened</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>Check database is already opened.</p>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>- (BOOL)isOpened</code></div>

		    
			

			
			<div class="method-subsection return">
				<h4 class="method-subtitle parameter-title">Return Value</h4>
				<p>isOpened</p>
			</div>
			

			

			

			

			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">WCTDatabase+Database.h</code></p>
			</div>
			
			
		</div>
	</div>
</div><div class="section-method">
	<a name="//api/name/close:" title="close:"></a>
	<h3 class="method-title"><code><a href="#//api/name/close:">&ndash;&nbsp;close:</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p><a href="#//api/name/close">close</a> the database.
        Since Multi-threaded operation is supported in WCDB, other operations in different thread can open the closed database. So this method can make sure database is closed in the &ldquo;onClosed&rdquo; block. All other operations will be blocked until this method returns.
        A close operation consists of 4 steps:
            1. blockade, which blocks all other operations.
            2. close, which closes all sqlite handles.
            3. onClosed, which trigger the callback.
            4. unblokade, which unblocks all other opreations.
        You can simply call close: to do all steps above or call these separately.
        Note that sometimes you might find that close: blocks the thread and never return. The reasons can be:
            1. You keep some WCDB objects, including WCTInsert, WCTDelete, WCTUpdate, WCTSelect, WCTRowSelect, WCTMultiSelect, WCTStatement, WCTTransaction. These objects should not be kept. You should get them, use them, then release them(set to nil) right away.
            2. Further more, those WCDB objects may be kept by NSAutoReleasePool, which is done by ARC automatically. So you should make sure that all WCDB objects in NSAutoReleasePool is drained. Since close: would wait until all operations done, the best practice is to call close: in sub-thread and display a loading animation in main thread.</p>

<pre><code> //close directly
 [database close:^(){
    //do something on this closed database
 }];
 //close separately
 [database blockade];
 [database close];
 //do something on this closed database
 [database unblockade];
</code></pre>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>- (void)close:(WCTCloseBlock)<em>onClosed</em></code></div>

		    
			
			<div class="method-subsection arguments-section parameters">
				<h4 class="method-subtitle parameter-title">Parameters</h4>
				<table class="argument-def parameter-def">
				
					<tr>
						<th scope="row" class="argument-name"><code>onClosed</code></th>
						<td><p>Trigger on database closed.</p></td>
					</tr>
				
				</table>
			</div>
			

			

			

			

			

			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">WCTDatabase+Database.h</code></p>
			</div>
			
			
		</div>
	</div>
</div><div class="section-method">
	<a name="//api/name/close" title="close"></a>
	<h3 class="method-title"><code><a href="#//api/name/close">&ndash;&nbsp;close</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>This interface is equivalent to [database close:nil].</p>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>- (void)close</code></div>

		    
			

			

			

			

			

			
			<div class="method-subsection see-also-section">
				<h4 class="method-subtitle">See Also</h4>
				<ul>
					
					<li><code><p><a href="#//api/name/close:">- close:</a></p></code></li>
					
				</ul>
			</div>
			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">WCTDatabase+Database.h</code></p>
			</div>
			
			
		</div>
	</div>
</div><div class="section-method">
	<a name="//api/name/blockade" title="blockade"></a>
	<h3 class="method-title"><code><a href="#//api/name/blockade">&ndash;&nbsp;blockade</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>Blockade the database.</p>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>- (void)blockade</code></div>

		    
			

			

			

			

			

			
			<div class="method-subsection see-also-section">
				<h4 class="method-subtitle">See Also</h4>
				<ul>
					
					<li><code><p><a href="#//api/name/close:">- close:</a></p></code></li>
					
				</ul>
			</div>
			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">WCTDatabase+Database.h</code></p>
			</div>
			
			
		</div>
	</div>
</div><div class="section-method">
	<a name="//api/name/unblockade" title="unblockade"></a>
	<h3 class="method-title"><code><a href="#//api/name/unblockade">&ndash;&nbsp;unblockade</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>Un<a href="#//api/name/blockade">blockade</a> the database.</p>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>- (void)unblockade</code></div>

		    
			

			

			

			

			

			
			<div class="method-subsection see-also-section">
				<h4 class="method-subtitle">See Also</h4>
				<ul>
					
					<li><code><p><a href="#//api/name/close:">- close:</a></p></code></li>
					
				</ul>
			</div>
			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">WCTDatabase+Database.h</code></p>
			</div>
			
			
		</div>
	</div>
</div><div class="section-method">
	<a name="//api/name/isBlockaded" title="isBlockaded"></a>
	<h3 class="method-title"><code><a href="#//api/name/isBlockaded">&ndash;&nbsp;isBlockaded</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>Check whether database is blockaded.</p>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>- (BOOL)isBlockaded</code></div>

		    
			

			
			<div class="method-subsection return">
				<h4 class="method-subtitle parameter-title">Return Value</h4>
				<p>isBlockaded</p>
			</div>
			

			

			

			

			
			<div class="method-subsection see-also-section">
				<h4 class="method-subtitle">See Also</h4>
				<ul>
					
					<li><code><p><a href="#//api/name/close:">- close:</a></p></code></li>
					
				</ul>
			</div>
			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">WCTDatabase+Database.h</code></p>
			</div>
			
			
		</div>
	</div>
</div><div class="section-method">
	<a name="//api/name/purgeFreeHandles" title="purgeFreeHandles"></a>
	<h3 class="method-title"><code><a href="#//api/name/purgeFreeHandles">&ndash;&nbsp;purgeFreeHandles</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>Purge all free handles of this database.
        WCDB will cache and reuse some sqlite handles to improve performance.
        The max count of free sqlite handles is same as the number of concurrent threads supported by the hardware implementation.
        You can call it to save some memory.</p>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>- (void)purgeFreeHandles</code></div>

		    
			

			

			

			

			

			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">WCTDatabase+Database.h</code></p>
			</div>
			
			
		</div>
	</div>
</div><div class="section-method">
	<a name="//api/name/PurgeFreeHandlesInAllDatabases" title="PurgeFreeHandlesInAllDatabases"></a>
	<h3 class="method-title"><code><a href="#//api/name/PurgeFreeHandlesInAllDatabases">+&nbsp;PurgeFreeHandlesInAllDatabases</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>Purge all free handles of all databases.
        Note that WCDB will call this interface automatically while it receives memory warning on iOS.</p>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>+ (void)PurgeFreeHandlesInAllDatabases</code></div>

		    
			

			

			

			

			

			
			<div class="method-subsection see-also-section">
				<h4 class="method-subtitle">See Also</h4>
				<ul>
					
					<li><code><p><a href="#//api/name/purgeFreeHandles">- purgeFreeHandles</a></p></code></li>
					
				</ul>
			</div>
			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">WCTDatabase+Database.h</code></p>
			</div>
			
			
		</div>
	</div>
</div>
						</div>
						

						<a title="Table Methods" name="task_Table Methods"></a>
						<h2 class="task-title">Table Methods</h2>

						<div class="task-list">
							<div class="section-method">
	<a name="//api/name/createTableAndIndexesOfName:withClass:" title="createTableAndIndexesOfName:withClass:"></a>
	<h3 class="method-title"><code><a href="#//api/name/createTableAndIndexesOfName:withClass:">&ndash;&nbsp;createTableAndIndexesOfName:withClass:</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>Create table and indexes from ORM if not exists.
        Note that it will add newly defined column automatically.
        Note that it will run embedded transaction.
        The embedded transaction means that it will run a transaction if it&rsquo;s not in other transaction, otherwise it will be executed within the existing transaction.</p>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>- (BOOL)createTableAndIndexesOfName:(NSString *)<em>tableName</em> withClass:(Class&lt;WCTTableCoding&gt;)<em>cls</em></code></div>

		    
			
			<div class="method-subsection arguments-section parameters">
				<h4 class="method-subtitle parameter-title">Parameters</h4>
				<table class="argument-def parameter-def">
				
					<tr>
						<th scope="row" class="argument-name"><code>tableName</code></th>
						<td><p>The name of the table to be created.</p></td>
					</tr>
				
					<tr>
						<th scope="row" class="argument-name"><code>cls</code></th>
						<td><p>class</p></td>
					</tr>
				
				</table>
			</div>
			

			
			<div class="method-subsection return">
				<h4 class="method-subtitle parameter-title">Return Value</h4>
				<p>YES only if no error occurs.</p>
			</div>
			

			

			

			

			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">WCTDatabase+Table.h</code></p>
			</div>
			
			
		</div>
	</div>
</div><div class="section-method">
	<a name="//api/name/getTableOfName:withClass:" title="getTableOfName:withClass:"></a>
	<h3 class="method-title"><code><a href="#//api/name/getTableOfName:withClass:">&ndash;&nbsp;getTableOfName:withClass:</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>Get a wrapper from an existing table.</p>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>- (WCTTable *)getTableOfName:(NSString *)<em>tableName</em> withClass:(Class&lt;WCTTableCoding&gt;)<em>cls</em></code></div>

		    
			
			<div class="method-subsection arguments-section parameters">
				<h4 class="method-subtitle parameter-title">Parameters</h4>
				<table class="argument-def parameter-def">
				
					<tr>
						<th scope="row" class="argument-name"><code>tableName</code></th>
						<td><p>The name of the table.</p></td>
					</tr>
				
					<tr>
						<th scope="row" class="argument-name"><code>cls</code></th>
						<td><p>a class implement <a href="../Protocols/WCTTableCoding.html">WCTTableCoding</a>.</p></td>
					</tr>
				
				</table>
			</div>
			

			
			<div class="method-subsection return">
				<h4 class="method-subtitle parameter-title">Return Value</h4>
				<p>nil for a non-existent table.</p>
			</div>
			

			

			

			

			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">WCTDatabase+Table.h</code></p>
			</div>
			
			
		</div>
	</div>
</div><div class="section-method">
	<a name="//api/name/createVirtualTableOfName:usingModule:withClass:" title="createVirtualTableOfName:usingModule:withClass:"></a>
	<h3 class="method-title"><code><a href="#//api/name/createVirtualTableOfName:usingModule:withClass:">&ndash;&nbsp;createVirtualTableOfName:usingModule:withClass:</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>Create virtual table from ORM if not exists.</p>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>- (BOOL)createVirtualTableOfName:(NSString *)<em>tableName</em> usingModule:(NSString *)<em>moduleName</em> withClass:(Class&lt;WCTTableCoding&gt;)<em>cls</em></code></div>

		    
			
			<div class="method-subsection arguments-section parameters">
				<h4 class="method-subtitle parameter-title">Parameters</h4>
				<table class="argument-def parameter-def">
				
					<tr>
						<th scope="row" class="argument-name"><code>tableName</code></th>
						<td><p>The name of the virtual table to be created.</p></td>
					</tr>
				
					<tr>
						<th scope="row" class="argument-name"><code>moduleName</code></th>
						<td><p>moduleName</p></td>
					</tr>
				
					<tr>
						<th scope="row" class="argument-name"><code>cls</code></th>
						<td><p>a class implement <a href="../Protocols/WCTTableCoding.html">WCTTableCoding</a>.</p></td>
					</tr>
				
				</table>
			</div>
			

			
			<div class="method-subsection return">
				<h4 class="method-subtitle parameter-title">Return Value</h4>
				<p>YES only if no error occurs.</p>
			</div>
			

			

			

			

			
			<div class="method-subsection see-also-section">
				<h4 class="method-subtitle">See Also</h4>
				<ul>
					
					<li><code><p><a href="http://www.sqlite.org/vtab.html">http://www.sqlite.org/vtab.html</a></p></code></li>
					
				</ul>
			</div>
			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">WCTDatabase+Table.h</code></p>
			</div>
			
			
		</div>
	</div>
</div><div class="section-method">
	<a name="//api/name/createTableOfName:withColumnDefList:andConstraintList:" title="createTableOfName:withColumnDefList:andConstraintList:"></a>
	<h3 class="method-title"><code><a href="#//api/name/createTableOfName:withColumnDefList:andConstraintList:">&ndash;&nbsp;createTableOfName:withColumnDefList:andConstraintList:</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>Create table from user-defined column if not exists.</p>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>- (BOOL)createTableOfName:(NSString *)<em>tableName</em> withColumnDefList:(const WCTColumnDefList &amp;)<em>columnDefList</em> andConstraintList:(const WCTTableConstraintList &amp;)<em>constraintList</em></code></div>

		    
			
			<div class="method-subsection arguments-section parameters">
				<h4 class="method-subtitle parameter-title">Parameters</h4>
				<table class="argument-def parameter-def">
				
					<tr>
						<th scope="row" class="argument-name"><code>tableName</code></th>
						<td><p>The name of the table to be created.</p></td>
					</tr>
				
					<tr>
						<th scope="row" class="argument-name"><code>columnDefList</code></th>
						<td><p>The list of column definition.</p></td>
					</tr>
				
					<tr>
						<th scope="row" class="argument-name"><code>constraintList</code></th>
						<td><p>The list of constraint.</p></td>
					</tr>
				
				</table>
			</div>
			

			
			<div class="method-subsection return">
				<h4 class="method-subtitle parameter-title">Return Value</h4>
				<p>YES only if no error occurs.</p>
			</div>
			

			

			

			

			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">WCTDatabase+Table.h</code></p>
			</div>
			
			
		</div>
	</div>
</div><div class="section-method">
	<a name="//api/name/createTableOfName:withColumnDefList:" title="createTableOfName:withColumnDefList:"></a>
	<h3 class="method-title"><code><a href="#//api/name/createTableOfName:withColumnDefList:">&ndash;&nbsp;createTableOfName:withColumnDefList:</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>This interface is equivalent to [database createTableOfName:tableName withColumnDefList:columnDefList andConstraintList:{}].</p>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>- (BOOL)createTableOfName:(NSString *)<em>tableName</em> withColumnDefList:(const WCTColumnDefList &amp;)<em>columnDefList</em></code></div>

		    
			
			<div class="method-subsection arguments-section parameters">
				<h4 class="method-subtitle parameter-title">Parameters</h4>
				<table class="argument-def parameter-def">
				
					<tr>
						<th scope="row" class="argument-name"><code>tableName</code></th>
						<td><p>The name of the table to be created.</p></td>
					</tr>
				
					<tr>
						<th scope="row" class="argument-name"><code>columnDefList</code></th>
						<td><p>The list of column definition.</p></td>
					</tr>
				
				</table>
			</div>
			

			
			<div class="method-subsection return">
				<h4 class="method-subtitle parameter-title">Return Value</h4>
				<p>YES only if no error occurs.</p>
			</div>
			

			

			

			

			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">WCTDatabase+Table.h</code></p>
			</div>
			
			
		</div>
	</div>
</div><div class="section-method">
	<a name="//api/name/isTableExists:" title="isTableExists:"></a>
	<h3 class="method-title"><code><a href="#//api/name/isTableExists:">&ndash;&nbsp;isTableExists:</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>Check whether tabel exists</p>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>- (BOOL)isTableExists:(NSString *)<em>tableName</em></code></div>

		    
			
			<div class="method-subsection arguments-section parameters">
				<h4 class="method-subtitle parameter-title">Parameters</h4>
				<table class="argument-def parameter-def">
				
					<tr>
						<th scope="row" class="argument-name"><code>tableName</code></th>
						<td><p>The name of the table to be checked.</p></td>
					</tr>
				
				</table>
			</div>
			

			
			<div class="method-subsection return">
				<h4 class="method-subtitle parameter-title">Return Value</h4>
				<p>YES if table exists. NO if table does not exist or an error occurs.</p>
			</div>
			

			

			

			

			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">WCTDatabase+Table.h</code></p>
			</div>
			
			
		</div>
	</div>
</div><div class="section-method">
	<a name="//api/name/dropTableOfName:" title="dropTableOfName:"></a>
	<h3 class="method-title"><code><a href="#//api/name/dropTableOfName:">&ndash;&nbsp;dropTableOfName:</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>Drop table if exists.</p>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>- (BOOL)dropTableOfName:(NSString *)<em>tableName</em></code></div>

		    
			
			<div class="method-subsection arguments-section parameters">
				<h4 class="method-subtitle parameter-title">Parameters</h4>
				<table class="argument-def parameter-def">
				
					<tr>
						<th scope="row" class="argument-name"><code>tableName</code></th>
						<td><p>The name of the table to be dropped.</p></td>
					</tr>
				
				</table>
			</div>
			

			
			<div class="method-subsection return">
				<h4 class="method-subtitle parameter-title">Return Value</h4>
				<p>YES only if no error occurs.</p>
			</div>
			

			

			

			

			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">WCTDatabase+Table.h</code></p>
			</div>
			
			
		</div>
	</div>
</div><div class="section-method">
	<a name="//api/name/createIndexOfName:withIndexList:forTable:" title="createIndexOfName:withIndexList:forTable:"></a>
	<h3 class="method-title"><code><a href="#//api/name/createIndexOfName:withIndexList:forTable:">&ndash;&nbsp;createIndexOfName:withIndexList:forTable:</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>Create table from user-defined index if not exists.</p>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>- (BOOL)createIndexOfName:(NSString *)<em>indexName</em> withIndexList:(const WCTIndexList &amp;)<em>indexList</em> forTable:(NSString *)<em>tableName</em></code></div>

		    
			
			<div class="method-subsection arguments-section parameters">
				<h4 class="method-subtitle parameter-title">Parameters</h4>
				<table class="argument-def parameter-def">
				
					<tr>
						<th scope="row" class="argument-name"><code>indexName</code></th>
						<td><p>The name of the index to be created.</p></td>
					</tr>
				
					<tr>
						<th scope="row" class="argument-name"><code>indexList</code></th>
						<td><p>The list of index definition.</p></td>
					</tr>
				
					<tr>
						<th scope="row" class="argument-name"><code>tableName</code></th>
						<td><p>The name of index-associated table.</p></td>
					</tr>
				
				</table>
			</div>
			

			
			<div class="method-subsection return">
				<h4 class="method-subtitle parameter-title">Return Value</h4>
				<p>YES only if no error occurs.</p>
			</div>
			

			

			

			

			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">WCTDatabase+Table.h</code></p>
			</div>
			
			
		</div>
	</div>
</div><div class="section-method">
	<a name="//api/name/dropIndexOfName:" title="dropIndexOfName:"></a>
	<h3 class="method-title"><code><a href="#//api/name/dropIndexOfName:">&ndash;&nbsp;dropIndexOfName:</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>Drop index if not exists.</p>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>- (BOOL)dropIndexOfName:(NSString *)<em>indexName</em></code></div>

		    
			
			<div class="method-subsection arguments-section parameters">
				<h4 class="method-subtitle parameter-title">Parameters</h4>
				<table class="argument-def parameter-def">
				
					<tr>
						<th scope="row" class="argument-name"><code>indexName</code></th>
						<td><p>The name of the index to be dropped.</p></td>
					</tr>
				
				</table>
			</div>
			

			
			<div class="method-subsection return">
				<h4 class="method-subtitle parameter-title">Return Value</h4>
				<p>YES only if no error occurs.</p>
			</div>
			

			

			

			

			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">WCTDatabase+Table.h</code></p>
			</div>
			
			
		</div>
	</div>
</div><div class="section-method">
	<a name="//api/name/addColumn:forTable:" title="addColumn:forTable:"></a>
	<h3 class="method-title"><code><a href="#//api/name/addColumn:forTable:">&ndash;&nbsp;addColumn:forTable:</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>Add column.</p>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>- (BOOL)addColumn:(const WCTColumnDef &amp;)<em>columnDef</em> forTable:(NSString *)<em>tableName</em></code></div>

		    
			
			<div class="method-subsection arguments-section parameters">
				<h4 class="method-subtitle parameter-title">Parameters</h4>
				<table class="argument-def parameter-def">
				
					<tr>
						<th scope="row" class="argument-name"><code>columnDef</code></th>
						<td><p>The definition of column to be added.</p></td>
					</tr>
				
					<tr>
						<th scope="row" class="argument-name"><code>tableName</code></th>
						<td><p>The name of table to do a column addition.</p></td>
					</tr>
				
				</table>
			</div>
			

			
			<div class="method-subsection return">
				<h4 class="method-subtitle parameter-title">Return Value</h4>
				<p>YES only if no error occurs.</p>
			</div>
			

			

			

			

			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">WCTDatabase+Table.h</code></p>
			</div>
			
			
		</div>
	</div>
</div>
						</div>
						

						<a title="Transaction Methods" name="task_Transaction Methods"></a>
						<h2 class="task-title">Transaction Methods</h2>

						<div class="task-list">
							<div class="section-method">
	<a name="//api/name/getTransaction" title="getTransaction"></a>
	<h3 class="method-title"><code><a href="#//api/name/getTransaction">&ndash;&nbsp;getTransaction</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>Generation a <a href="../Classes/WCTTransaction.html">WCTTransaction</a> object to do a transaction.</p>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>- (WCTTransaction *)getTransaction</code></div>

		    
			

			
			<div class="method-subsection return">
				<h4 class="method-subtitle parameter-title">Return Value</h4>
				<p><a href="../Classes/WCTTransaction.html">WCTTransaction</a></p>
			</div>
			

			

			

			

			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">WCTDatabase+Transaction.h</code></p>
			</div>
			
			
		</div>
	</div>
</div><div class="section-method">
	<a name="//api/name/runTransaction:event:" title="runTransaction:event:"></a>
	<h3 class="method-title"><code><a href="#//api/name/runTransaction:event:">&ndash;&nbsp;runTransaction:event:</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>Run a transaction in block.</p>

<pre><code> BOOL commited = [database runTransaction:^BOOL(){
    BOOL result = [database insertObject:object into:tableName];
    return result;//return YES to commit transaction and return NO to rollback transaction.
 } event:^(WCTTransactionEvent event) {
    switch (event) {
        case WCTTransactionEventBeginFailed:
            break;
        case WCTTransactionEventCommitFailed:
            break;
        case WCTTransactionEventRollback:
            break;
        case WCTTransactionEventRollbackFailed:
            break;
    };
 }];
</code></pre>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>- (BOOL)runTransaction:(WCTTransactionBlock)<em>inTransaction</em> event:(WCTTransactionEventBlock)<em>onTransactionStateChanged</em></code></div>

		    
			
			<div class="method-subsection arguments-section parameters">
				<h4 class="method-subtitle parameter-title">Parameters</h4>
				<table class="argument-def parameter-def">
				
					<tr>
						<th scope="row" class="argument-name"><code>inTransaction</code></th>
						<td><p>Operation inside transaction.</p></td>
					</tr>
				
					<tr>
						<th scope="row" class="argument-name"><code>onTransactionStateChanged</code></th>
						<td><p>State changed event.</p></td>
					</tr>
				
				</table>
			</div>
			

			
			<div class="method-subsection return">
				<h4 class="method-subtitle parameter-title">Return Value</h4>
				<p>YES only if transaction is commited.</p>
			</div>
			

			

			

			

			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">WCTDatabase+Transaction.h</code></p>
			</div>
			
			
		</div>
	</div>
</div><div class="section-method">
	<a name="//api/name/runTransaction:" title="runTransaction:"></a>
	<h3 class="method-title"><code><a href="#//api/name/runTransaction:">&ndash;&nbsp;runTransaction:</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>This interface is equivalent to [database runTransaction:transaction event:nil];</p>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>- (BOOL)runTransaction:(WCTTransactionBlock)<em>inTransaction</em></code></div>

		    
			
			<div class="method-subsection arguments-section parameters">
				<h4 class="method-subtitle parameter-title">Parameters</h4>
				<table class="argument-def parameter-def">
				
					<tr>
						<th scope="row" class="argument-name"><code>inTransaction</code></th>
						<td><p>Operation inside transaction.</p></td>
					</tr>
				
				</table>
			</div>
			

			
			<div class="method-subsection return">
				<h4 class="method-subtitle parameter-title">Return Value</h4>
				<p>YES only if transaction is commited.</p>
			</div>
			

			

			

			

			
			<div class="method-subsection see-also-section">
				<h4 class="method-subtitle">See Also</h4>
				<ul>
					
					<li><code><p><a href="#//api/name/runTransaction:event:">- runTransaction:event:</a></p></code></li>
					
				</ul>
			</div>
			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">WCTDatabase+Transaction.h</code></p>
			</div>
			
			
		</div>
	</div>
</div><div class="section-method">
	<a name="//api/name/beginTransaction" title="beginTransaction"></a>
	<h3 class="method-title"><code><a href="#//api/name/beginTransaction">&ndash;&nbsp;beginTransaction</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>Separate interface of <a href="#//api/name/runTransaction:">runTransaction:</a></p>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>- (BOOL)beginTransaction</code></div>

		    
			

			
			<div class="method-subsection return">
				<h4 class="method-subtitle parameter-title">Return Value</h4>
				<p>YES only if no error occurs.</p>
			</div>
			

			

			
			<div class="method-subsection discussion-section">
				<h4 class="method-subtitle">Discussion</h4>
				<div class="warning"><p><strong>Warning:</strong> You should call beginTransaction , <a href="#//api/name/commitTransaction">commitTransaction</a> , <a href="#//api/name/rollbackTransaction">rollbackTransaction</a> and all other operations in same thread. To do a cross-thread transaction, use <a href="../Classes/WCTTransaction.html">WCTTransaction</a>.</p></div>
			</div>
			

			

			
			<div class="method-subsection see-also-section">
				<h4 class="method-subtitle">See Also</h4>
				<ul>
					
					<li><code><p><a href="../Classes/WCTTransaction.html">WCTTransaction</a></p></code></li>
					
				</ul>
			</div>
			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">WCTDatabase+Transaction.h</code></p>
			</div>
			
			
		</div>
	</div>
</div><div class="section-method">
	<a name="//api/name/commitTransaction" title="commitTransaction"></a>
	<h3 class="method-title"><code><a href="#//api/name/commitTransaction">&ndash;&nbsp;commitTransaction</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>Separate interface of <a href="#//api/name/runTransaction:">runTransaction:</a></p>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>- (BOOL)commitTransaction</code></div>

		    
			

			
			<div class="method-subsection return">
				<h4 class="method-subtitle parameter-title">Return Value</h4>
				<p>YES only if no error occurs.</p>
			</div>
			

			

			
			<div class="method-subsection discussion-section">
				<h4 class="method-subtitle">Discussion</h4>
				<div class="warning"><p><strong>Warning:</strong> You should call <a href="#//api/name/beginTransaction">beginTransaction</a> , commitTransaction , <a href="#//api/name/rollbackTransaction">rollbackTransaction</a> and all other operations in same thread. To do a cross-thread transaction, use <a href="../Classes/WCTTransaction.html">WCTTransaction</a>.</p></div>
			</div>
			

			

			
			<div class="method-subsection see-also-section">
				<h4 class="method-subtitle">See Also</h4>
				<ul>
					
					<li><code><p><a href="../Classes/WCTTransaction.html">WCTTransaction</a></p></code></li>
					
				</ul>
			</div>
			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">WCTDatabase+Transaction.h</code></p>
			</div>
			
			
		</div>
	</div>
</div><div class="section-method">
	<a name="//api/name/rollbackTransaction" title="rollbackTransaction"></a>
	<h3 class="method-title"><code><a href="#//api/name/rollbackTransaction">&ndash;&nbsp;rollbackTransaction</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>Separate interface of <a href="#//api/name/runTransaction:">runTransaction:</a></p>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>- (BOOL)rollbackTransaction</code></div>

		    
			

			
			<div class="method-subsection return">
				<h4 class="method-subtitle parameter-title">Return Value</h4>
				<p>YES only if no error occurs.</p>
			</div>
			

			

			
			<div class="method-subsection discussion-section">
				<h4 class="method-subtitle">Discussion</h4>
				<div class="warning"><p><strong>Warning:</strong> You should call <a href="#//api/name/beginTransaction">beginTransaction</a> , <a href="#//api/name/commitTransaction">commitTransaction</a> , rollbackTransaction and all other operations in same thread. To do a cross-thread transaction, use <a href="../Classes/WCTTransaction.html">WCTTransaction</a>.</p></div>
			</div>
			

			

			
			<div class="method-subsection see-also-section">
				<h4 class="method-subtitle">See Also</h4>
				<ul>
					
					<li><code><p><a href="../Classes/WCTTransaction.html">WCTTransaction</a></p></code></li>
					
				</ul>
			</div>
			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">WCTDatabase+Transaction.h</code></p>
			</div>
			
			
		</div>
	</div>
</div>
						</div>
						

						<a title="File Methods" name="task_File Methods"></a>
						<h2 class="task-title">File Methods</h2>

						<div class="task-list">
							<div class="section-method">
	<a name="//api/name/removeFilesWithError:" title="removeFilesWithError:"></a>
	<h3 class="method-title"><code><a href="#//api/name/removeFilesWithError:">&ndash;&nbsp;removeFilesWithError:</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>Remove all database-related files.</p>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>- (BOOL)removeFilesWithError:(WCTError **)<em>error</em></code></div>

		    
			
			<div class="method-subsection arguments-section parameters">
				<h4 class="method-subtitle parameter-title">Parameters</h4>
				<table class="argument-def parameter-def">
				
					<tr>
						<th scope="row" class="argument-name"><code>error</code></th>
						<td><p>error</p></td>
					</tr>
				
				</table>
			</div>
			

			
			<div class="method-subsection return">
				<h4 class="method-subtitle parameter-title">Return Value</h4>
				<p>YES if all files are removed.</p>
			</div>
			

			

			
			<div class="method-subsection discussion-section">
				<h4 class="method-subtitle">Discussion</h4>
				<div class="warning"><p><strong>Warning:</strong> You should call it on a closed database. Otherwise you will get a warning.</p></div>
			</div>
			

			

			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">WCTDatabase+File.h</code></p>
			</div>
			
			
		</div>
	</div>
</div><div class="section-method">
	<a name="//api/name/moveFilesToDirectory:withExtraFiles:andError:" title="moveFilesToDirectory:withExtraFiles:andError:"></a>
	<h3 class="method-title"><code><a href="#//api/name/moveFilesToDirectory:withExtraFiles:andError:">&ndash;&nbsp;moveFilesToDirectory:withExtraFiles:andError:</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>Move all database-related files and some extra files to directory safely.
        You should call it on a closed database. Otherwise you will get a warning and you may get a corrupted database.</p>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>- (BOOL)moveFilesToDirectory:(NSString *)<em>directory</em> withExtraFiles:(NSArray&lt;NSString*&gt; *)<em>extraFiles</em> andError:(WCTError **)<em>error</em></code></div>

		    
			
			<div class="method-subsection arguments-section parameters">
				<h4 class="method-subtitle parameter-title">Parameters</h4>
				<table class="argument-def parameter-def">
				
					<tr>
						<th scope="row" class="argument-name"><code>directory</code></th>
						<td><p>destination</p></td>
					</tr>
				
					<tr>
						<th scope="row" class="argument-name"><code>extraFiles</code></th>
						<td><p>extraFiles</p></td>
					</tr>
				
					<tr>
						<th scope="row" class="argument-name"><code>error</code></th>
						<td><p>error</p></td>
					</tr>
				
				</table>
			</div>
			

			
			<div class="method-subsection return">
				<h4 class="method-subtitle parameter-title">Return Value</h4>
				<p>YES if all files are moved.</p>
			</div>
			

			

			
			<div class="method-subsection discussion-section">
				<h4 class="method-subtitle">Discussion</h4>
				<div class="warning"><p><strong>Warning:</strong> Since file operation is not atomic, There may be some accidents during this period. For example, app may crash while db file is moved to destination and wal file is not. Then none of destination and source contains the whole data. This interface can make sure all of your data is in source or destination.</p></div>
			</div>
			

			

			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">WCTDatabase+File.h</code></p>
			</div>
			
			
		</div>
	</div>
</div><div class="section-method">
	<a name="//api/name/moveFilesToDirectory:withError:" title="moveFilesToDirectory:withError:"></a>
	<h3 class="method-title"><code><a href="#//api/name/moveFilesToDirectory:withError:">&ndash;&nbsp;moveFilesToDirectory:withError:</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>This interface is equivalent to [database moveFilesToDirectory:directory withExtraFiles:nil andError:error].</p>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>- (BOOL)moveFilesToDirectory:(NSString *)<em>directory</em> withError:(WCTError **)<em>error</em></code></div>

		    
			
			<div class="method-subsection arguments-section parameters">
				<h4 class="method-subtitle parameter-title">Parameters</h4>
				<table class="argument-def parameter-def">
				
					<tr>
						<th scope="row" class="argument-name"><code>directory</code></th>
						<td><p>destination</p></td>
					</tr>
				
					<tr>
						<th scope="row" class="argument-name"><code>error</code></th>
						<td><p>error</p></td>
					</tr>
				
				</table>
			</div>
			

			
			<div class="method-subsection return">
				<h4 class="method-subtitle parameter-title">Return Value</h4>
				<p>YES if all files are moved.</p>
			</div>
			

			

			

			

			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">WCTDatabase+File.h</code></p>
			</div>
			
			
		</div>
	</div>
</div><div class="section-method">
	<a name="//api/name/getPaths" title="getPaths"></a>
	<h3 class="method-title"><code><a href="#//api/name/getPaths">&ndash;&nbsp;getPaths</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>Paths to all database-related files.</p>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>- (NSArray&lt;NSString*&gt; *)getPaths</code></div>

		    
			

			
			<div class="method-subsection return">
				<h4 class="method-subtitle parameter-title">Return Value</h4>
				<p>paths</p>
			</div>
			

			

			

			

			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">WCTDatabase+File.h</code></p>
			</div>
			
			
		</div>
	</div>
</div><div class="section-method">
	<a name="//api/name/getFilesSizeWithError:" title="getFilesSizeWithError:"></a>
	<h3 class="method-title"><code><a href="#//api/name/getFilesSizeWithError:">&ndash;&nbsp;getFilesSizeWithError:</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>Get the space used by the database files.</p>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>- (NSUInteger)getFilesSizeWithError:(WCTError **)<em>error</em></code></div>

		    
			
			<div class="method-subsection arguments-section parameters">
				<h4 class="method-subtitle parameter-title">Parameters</h4>
				<table class="argument-def parameter-def">
				
					<tr>
						<th scope="row" class="argument-name"><code>error</code></th>
						<td><p>error</p></td>
					</tr>
				
				</table>
			</div>
			

			
			<div class="method-subsection return">
				<h4 class="method-subtitle parameter-title">Return Value</h4>
				<p>The sum of files size in bytes.</p>
			</div>
			

			

			
			<div class="method-subsection discussion-section">
				<h4 class="method-subtitle">Discussion</h4>
				<div class="warning"><p><strong>Warning:</strong> You should call it on a closed database. Otherwise you will get a warning.</p></div>
			</div>
			

			

			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">WCTDatabase+File.h</code></p>
			</div>
			
			
		</div>
	</div>
</div>
						</div>
						

						<a title="Statictics Methods" name="task_Statictics Methods"></a>
						<h2 class="task-title">Statictics Methods</h2>

						<div class="task-list">
							<div class="section-method">
	<a name="//api/name/setTrace:" title="setTrace:"></a>
	<h3 class="method-title"><code><a href="#//api/name/setTrace:">&ndash;&nbsp;setTrace:</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>You can register a tracer to monitor the performance of all SQLs in this database.</p>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>- (void)setTrace:(WCTTrace)<em>trace</em></code></div>

		    
			
			<div class="method-subsection arguments-section parameters">
				<h4 class="method-subtitle parameter-title">Parameters</h4>
				<table class="argument-def parameter-def">
				
					<tr>
						<th scope="row" class="argument-name"><code>trace</code></th>
						<td><p>trace</p></td>
					</tr>
				
				</table>
			</div>
			

			

			

			

			

			
			<div class="method-subsection see-also-section">
				<h4 class="method-subtitle">See Also</h4>
				<ul>
					
					<li><code><p><a href="../Classes/WCTStatictics.html#//api/name/SetGlobalTrace:">[WCTStatictics SetGlobalTrace:]</a></p></code></li>
					
				</ul>
			</div>
			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">WCTDatabase+Statictics.h</code></p>
			</div>
			
			
		</div>
	</div>
</div>
						</div>
						
					</div>
					
					

                    
                    
          
				</main>

				<footer>
					<div class="footer-copyright">
						
						<p class="copyright">Copyright &copy; 2017 Tencent. All rights reserved. Updated: 2017-06-02</p>
						
						
						<p class="generator">Generated by <a href="http://appledoc.gentlebytes.com">appledoc 2.2.1 (build 1334)</a>.</p>
						
					</div>
				</footer>
			</div>
		</div>
	</article>

	<script src="../js/script.js"></script>
</body>
</html>